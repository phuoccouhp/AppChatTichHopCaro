import re

# Read file
with open('ChatAppClient/Forms/frmHome.cs', 'r', encoding='utf-8') as f:
    content = f.read()

# Fix 1: Change button location from 200 to 130
content = content.replace('Point(200, 10)', 'Point(130, 10)')

# Fix 2: Add Tank Multiplayer button after Create Group button
old_text = '''btnCreateGroup.Click += (s, e) => CreateNewGroup();
            lblFriendsTitle.Controls.Add(btnCreateGroup);
        }'''

new_text = '''btnCreateGroup.Click += (s, e) => CreateNewGroup();
            lblFriendsTitle.Controls.Add(btnCreateGroup);

            // ✅ Thêm nút Tank Multiplayer
            Button btnTankMultiplayer = new Button();
            btnTankMultiplayer.Text = "🎮 Tank";
            btnTankMultiplayer.Font = new Font("Segoe UI", 9, FontStyle.Bold);
            btnTankMultiplayer.Size = new Size(70, 30);
            btnTankMultiplayer.Location = new Point(205, 10);
            btnTankMultiplayer.BackColor = Color.FromArgb(67, 181, 129);
            btnTankMultiplayer.ForeColor = Color.White;
            btnTankMultiplayer.FlatStyle = FlatStyle.Flat;
            btnTankMultiplayer.FlatAppearance.BorderSize = 0;
            btnTankMultiplayer.Cursor = Cursors.Hand;
            btnTankMultiplayer.Click += (s, e) => OpenTankMultiplayerLobby();
            lblFriendsTitle.Controls.Add(btnTankMultiplayer);
        }'''

content = content.replace(old_text, new_text)

# Fix 3: Add OpenTankMultiplayerLobby method before CreateNewGroup
old_method = '''// Hàm để tạo nhóm mới - gọi từ UI
        public void CreateNewGroup()'''

new_method = '''// Hàm mở Tank Multiplayer Lobby
        private void OpenTankMultiplayerLobby()
        {
            var lobbyForm = new frmTankMultiplayerLobby();
            lobbyForm.Show();
        }

        // Hàm để tạo nhóm mới - gọi từ UI
        public void CreateNewGroup()'''

content = content.replace(old_method, new_method)

# Write back
with open('ChatAppClient/Forms/frmHome.cs', 'w', encoding='utf-8') as f:
    f.write(content)

print("Done!")
