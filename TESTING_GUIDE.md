# ?? H??NG D?N TESTING CH?C N?NG VÀ HI?U N?NG

## ?? DANH SÁCH TEST CASES

### **PH?N 1: G?i Yêu C?u Ch?i Game**

#### Test Case 1.1: G?i L?i M?i Ch?i Caro
```
Tiên ??:
  - Client A ??ng nh?p v?i username: user1
  - Client B ??ng nh?p v?i username: user2
  - C? hai ?ang online
  
B??c Th?c Hi?n:
  1. Trên Client A, m? chat v?i User B
  2. Nh?n nút "??" (Ch?i Game)
  3. Ch?n "Ch?i Caro" t? menu context
  
K?t Qu? Mong ??i:
  ? Client A th?y bubble "B?n m?i user2 ch?i Caro" v?i status "?ang ch?..."
  ? Client B nhìn th?y game invite bubble v?i 2 nút: "? Ch?p nh?n" và "? T? Ch?i"
  ? Nút "??" trên Client A chuy?n sang "..." (disabled)
```

#### Test Case 1.2: Ch?p Nh?n L?i M?i Ch?i Caro
```
Tiên ??:
  - Client B v?a nhìn th?y game invite bubble t? Client A
  
B??c Th?c Hi?n:
  1. Trên Client B, nh?n nút "?" trên game invite bubble
  
K?t Qu? Mong ??i:
  ? Bubble trên Client B c?p nh?t: "? ?ã ch?p nh?n"
  ? C?a s? game Caro kh?i ??ng trên Client B
  ? C?a s? game Caro kh?i ??ng trên Client A
  ? C? hai client hi?n th? b?ng c? và có th? ch?i
```

#### Test Case 1.3: T? Ch?i L?i M?i Ch?i Caro
```
Tiên ??:
  - Client B v?a nhìn th?y game invite bubble t? Client A
  
B??c Th?c Hi?n:
  1. Trên Client B, nh?n nút "?" trên game invite bubble
  
K?t Qu? Mong ??i:
  ? Bubble trên Client B c?p nh?t: "? ?ã t? ch?i"
  ? C?a s? game không kh?i ??ng
  ? Bubble trên Client A c?p nh?t: "? ?ã t? ch?i"
  ? Nút "??" trên Client A reset l?i, có th? m?i l?i
```

#### Test Case 1.4: M?i L?i Sau Khi B? T? Ch?i
```
Tiên ??:
  - Client B v?a t? ch?i l?i m?i ch?i Caro
  - Bubble trên Client A hi?n th? "? ?ã t? ch?i" có nút "M?i L?i"
  
B??c Th?c Hi?n:
  1. Trên Client A, nh?n nút "M?i L?i" trên game invite bubble
  
K?t Qu? Mong ??i:
  ? Bubble trên Client A c?p nh?t: "?ang ch?..." (reset)
  ? Client B nhìn th?y game invite bubble m?i
  ? Nút "??" trên Client A chuy?n sang "..."
```

#### Test Case 1.5: G?i L?i M?i Ch?i Tank Game
```
Tiên ??:
  - Client A ?ã ???c reset nút "??"
  - Client A và B ?ang online
  
B??c Th?c Hi?n:
  1. Trên Client A, nh?n nút "??"
  2. Ch?n "Ch?i Tank Game" t? menu context
  
K?t Qu? Mong ??i:
  ? Client A th?y bubble "B?n m?i user2 ch?i Tank Game"
  ? Client B nhìn th?y game invite bubble cho Tank Game
  ? Nút "??" trên Client A chuy?n sang "..."
```

#### Test Case 1.6: Ch?p Nh?n L?i M?i Tank Game
```
Tiên ??:
  - Client B v?a nhìn th?y game invite bubble cho Tank Game
  
B??c Th?c Hi?n:
  1. Trên Client B, nh?n nút "?"
  
K?t Qu? Mong ??i:
  ? Bubble c?p nh?t: "? ?ã ch?p nh?n"
  ? C?a s? Tank Game kh?i ??ng trên Client B
  ? C?a s? Tank Game kh?i ??ng trên Client A
  ? C? hai ??u th?y ??i th? ?ang s?n sàng
```

---

### **PH?N 2: Ki?m Tra T?c ?? Nh?n Tin Nh?n**

#### Test Case 2.1: ?o Latency Tin Nh?n Text
```
Công C?:
  - Chrome DevTools (ho?c Fiddler)
  - Stopwatch (ho?c task timer)
  
B??c Th?c Hi?n:
  1. M? Chrome DevTools ? Network tab
  2. Filter: "packet" ho?c t?t c? requests
  3. Client A g?i tin nh?n: "Hello"
  4. Quan sát th?i gian response (ch?a th?y trên UI)
  5. Client B nhìn th?y tin nh?n
  6. Ghi l?i time difference
  
K?t Qu? Mong ??i:
  ? Latency < 200ms (t?t)
  ? Latency < 100ms (r?t t?t)
  ? Latency > 500ms (c?nh báo)
  
Công Th?c Tính:
  Latency = (Th?i gian nh?n - Th?i gian g?i)
```

#### Test Case 2.2: G?i Liên Ti?p Tin Nh?n
```
B??c Th?c Hi?n:
  1. Client A g?i 10 tin nh?n liên ti?p trong 1 giây
  2. Quan sát Client B nh?n ???c các tin nh?n
  
K?t Qu? Mong ??i:
  ? T?t c? 10 tin nh?n ???c nh?n
  ? Không có tin nh?n nào b? m?t
  ? Th? t? tin nh?n chính xác (t? c? ??n m?i)
  ? N?u có tin nh?n m?t ? Bug
```

#### Test Case 2.3: G?i Tin Nh?n L?n
```
Tiên ??:
  - Tin nh?n ch?a ~1000 ký t? (1 ?o?n v?n dài)
  
B??c Th?c Hi?n:
  1. Client A g?i tin nh?n dài
  2. ?o th?i gian g?i và nh?n
  
K?t Qu? Mong ??i:
  ? Tin nh?n g?i thành công
  ? Latency < 300ms
  ? Timeout ho?c l?i ? Check buffer size
```

#### Test Case 2.4: G?i Game Invite
```
B??c Th?c Hi?n:
  1. Client A g?i game invite
  2. ?o th?i gian t? khi nh?n nút ??n khi Client B nhìn th?y bubble
  
K?t Qu? Mong ??i:
  ? Latency < 300ms
  ? Bubble hi?n th? ngay (không delay)
```

---

### **PH?N 3: Ki?m Tra L?ch S? Chat**

#### Test Case 3.1: Load L?ch S? Chat Có Game Invite
```
Tiên ??:
  - Client A và B ?ã trao ??i vài tin nh?n và game invites
  - C?a s? chat ?ã ?óng
  
B??c Th?c Hi?n:
  1. Client A m? l?i chat v?i Client B
  2. Chú ý xem l?ch s? tin nh?n
  
K?t Qu? Mong ??i:
  ? T?t c? tin nh?n text ???c hi?n th?
  ? T?t c? game invite bubbles ???c hi?n th?
  ? Game invite bubbles hi?n th? tr?ng thái (Accepted/Declined)
  ? Bubble có th? m? l?i nút "M?i L?i" n?u b? t? ch?i
```

---

### **PH?N 4: Ki?m Tra Memory & CPU**

#### Test Case 4.1: Monitoring Memory Usage
```
Công C?:
  - Task Manager (Ctrl+Shift+Esc)
  - Performance Monitor
  
B??c Th?c Hi?n:
  1. M? Task Manager ? Performance tab
  2. Ch?y ChatApp.Server
  3. Ghi l?i Memory usage ban ??u
  4. G?i 100 tin nh?n liên ti?p
  5. Ghi l?i Memory usage sau
  
K?t Qu? Mong ??i:
  ? Memory t?ng < 50 MB
  ? Memory t?ng > 100 MB ? Possible memory leak
```

#### Test Case 4.2: Monitoring CPU Usage
```
Công C?:
  - Task Manager ? Performance tab
  
B??c Th?c Hi?n:
  1. Quan sát CPU usage khi idle (không g?i tin nh?n)
  2. G?i 50 tin nh?n liên ti?p
  3. Quan sát peak CPU usage
  4. Ch? 30 giây, quan sát CPU l?i
  
K?t Qu? Mong ??i:
  ? Idle CPU < 5%
  ? Peak CPU < 30% (khi g?i)
  ? Sau 30s quay l?i < 5% (no memory leak)
  ? CPU luôn > 20% ? Possible busy loop
```

---

### **PH?N 5: Stress Testing**

#### Test Case 5.1: G?i Tin Nh?n V?i Nhi?u B?n Bè
```
Tiên ??:
  - Client A có 5 b?n bè online
  - M?i b?n bè là 1 client khác
  
B??c Th?c Hi?n:
  1. Client A g?i tin nh?n "Hello" cho t?t c? 5 b?n
  2. ?o th?i gian g?i t?t c? (Parallel)
  3. Ki?m tra t?t c? 5 client có nh?n
  
K?t Qu? Mong ??i:
  ? T?t c? 5 client nh?n tin nh?n < 500ms
  ? Không có timeout ho?c l?i
```

#### Test Case 5.2: K?t N?i Ng?t & Tái K?t N?i
```
B??c Th?c Hi?n:
  1. Client A g?i tin nh?n
  2. Ng?t k?t n?i (Disconnect t? Network)
  3. Ch? 5 giây
  4. Tái k?t n?i
  5. Ki?m tra xem Client A có th? g?i tin nh?n không
  
K?t Qu? Mong ??i:
  ? Client A ng?t k?t n?i ? Button disable, offline mode
  ? Tái k?t n?i ? Restore connection t? ??ng
  ? Có th? g?i tin nh?n l?i
```

---

## ?? TIÊU CHÍ ?? THÀNH CÔNG

| Tính N?ng | Tiêu Chí | Tr?ng Thái |
|-----------|----------|-----------|
| **Game Invite Caro** | G?i & Nh?n & Ch?i | ? Pass/? Fail |
| **Game Invite Tank** | G?i & Nh?n & Ch?i | ? Pass/? Fail |
| **T? Ch?i Game** | Bubble update & Button reset | ? Pass/? Fail |
| **M?i L?i** | Nút "M?i L?i" ho?t ??ng | ? Pass/? Fail |
| **Latency Tin Nh?n** | < 200ms | ? Pass/? Fail |
| **Latency Game Invite** | < 300ms | ? Pass/? Fail |
| **Memory Usage** | < 50 MB/100 msg | ? Pass/? Fail |
| **CPU Usage** | < 30% peak | ? Pass/? Fail |
| **Stress: 5 Friends** | T?t c? nh?n < 500ms | ? Pass/? Fail |

---

## ?? TEMPLATE BÁO CÁO TEST

```
?????????????????????????????????????????????????????????????
                    TEST REPORT - NGÀY: [DATE]
?????????????????????????????????????????????????????????????

1. Test Environment:
   - Server OS: [Windows 10/11/Server 2019/...]
   - Client OS: [Windows 10/11/...]
   - Network: [Wifi/LAN/Ethernet]
   - Latency: [XX ms]
   
2. Test Results:
   - Game Invite Caro: ? PASS / ? FAIL
   - Game Invite Tank: ? PASS / ? FAIL
   - T? Ch?i Game: ? PASS / ? FAIL
   - M?i L?i: ? PASS / ? FAIL
   
3. Performance Metrics:
   - Avg Latency (Text): [XX ms]
   - Avg Latency (Game Invite): [XX ms]
   - Memory Usage: [XX MB]
   - CPU Usage: [XX %]
   
4. Issues Found:
   [N?u có l?i, ghi chi ti?t ? ?ây]
   
5. Recommendations:
   [G?i ý c?i ti?n]

?????????????????????????????????????????????????????????????
```

---

## ?? DEBUG TIPS

N?u test fail, ki?m tra:

1. **Game Invite Không G?i**:
   - ? Ki?m tra `RelayPrivatePacket()` có l?i
   - ? Ki?m tra UserID c?a receiver có t?n t?i không
   - ? Xem server log: "[Game] user1 m?i user2"

2. **Latency Cao**:
   - ? Ki?m tra network latency (ping)
   - ? Ki?m tra server CPU/RAM (Resource Monitor)
   - ? Enable TCP_NODELAY (?ã b?t)

3. **Memory Leak**:
   - ? Ki?m tra `SendPacket()` có dispose stream không
   - ? Ki?m tra `HandlePacket()` có t?o reference cycle không
   - ? Memory pool khác null

4. **Game Không Kh?i ??ng**:
   - ? Ki?m tra `GameStartPacket` có g?i không
   - ? Ki?m tra `HandleGameStart()` có ???c g?i không
   - ? Xem client log: "[Game] HandleGameStart called"

---

**Last Updated**: 2024  
**Test Environment**: .NET 8, Windows 10/11
