# ?? ?????Client ????? Server ????

## ? ?????

**????**: Windows Firewall ???? **Inbound ??**????? **Outbound ??**??? Server ????????? Client?

---

## ?? ????

### 1. ???? ?
- **FirewallHelper.cs**: ?? PowerShell ?????????
  - ????????????????
  - ?????? `Continue` ?? `Stop`
  - ?? Outbound ??????

### 2. ?????? ?
- **QuickStart.bat** - ??????? Admin + ?????
- **RunServerAsAdmin.bat** - ? Admin ???? Server
- **OpenFirewall.bat** - ????? PowerShell ????

### 3. ???? ?
- **CLIENT_SERVER_CONNECTION_FIX.md** - ???????????
- **SERVER_FIREWALL_SETUP_GUIDE.md** - ??????????

---

## ?? ?????3 ??

### ??????? QuickStart.bat

```bash
# 1. ??????
QuickStart.bat

# ??????
# ? ?? Admin ??
# ? ?? Inbound ??
# ? ?? Outbound ??
# ? ?? Server

# 2. ?? "Server ?????: 9000" ???? Client

# 3. ?? ? ???
```

### ???????

```bash
# 1. ? Admin ?? CMD/PowerShell
# 2. ????????????
.\OpenFirewall.bat

# 3. ?? Server
cd ChatAppServer
dotnet run

# 4. Client ?? ? ???
```

---

## ?? ??????

### ??? ?
```
[CONNECT] New client connected: 192.168.x.x
[RECV RAW] LoginPacket ????
[Client] ?? 10 ?... ???
?? Server ?????? Firewall ??
```

### ??? ?
```
? Firewall port 9000 successfully opened and verified!
[CONNECT] New client connected: 192.168.x.x
[RECV RAW] LoginPacket ????
[LOGIN] User 'admin' ????
? Server ????????
[Client] ???? ? ?????
```

---

## ?? ???????

| ?? | Inbound | Outbound |
|------|---------|----------|
| **Rule Name** | ChatAppServer | ChatAppServer (Out) |
| **Direction** | Inbound | Outbound |
| **Action** | Allow | Allow |
| **Protocol** | TCP | TCP |
| **Port** | 9000 | 9000 |
| **Remote IP** | Any | **Any** (??!) |
| **Profiles** | Domain, Private, Public | Domain, Private, Public |
| **Enabled** | Yes | Yes |

---

## ?? ????

### ?????????

#### 1. ???????
```powershell
Get-NetFirewallRule -DisplayName "ChatAppServer*" | 
    Select DisplayName, Direction, Action, Enabled | 
    Format-Table
```

#### 2. ?? Server ?????
```cmd
netstat -ano | findstr :9000
```
???? LISTENING ??

#### 3. ?? Ping
```cmd
ping [Server-IP]
```

#### 4. ?????????
```powershell
Get-NetFirewallRule -DisplayName "ChatAppServer (Out)" | 
    Get-NetFirewallAddressFilter
```
???? `RemoteAddress : Any`

#### 5. ??????
```cmd
.\DebugFirewallRules.ps1
```

---

## ?? ????

???????
| ?? | ?? |
|------|------|
| `QuickStart.bat` | ? ???????? |
| `RunServerAsAdmin.bat` | ? Admin ???? |
| `CLIENT_SERVER_CONNECTION_FIX.md` | ???????? |
| `SERVER_FIREWALL_SETUP_GUIDE.md` | ????????? |

??????
| ?? | ???? |
|------|---------|
| `FirewallHelper.cs` | ?? PowerShell ??????????? |
| `OpenFirewall.bat` | ?? PowerShell ???? |

---

## ?? ?????

1. **???????**
   - ?? Inbound ? Client ????? Server ????
   - ????? Inbound ? Outbound ? ???????

2. **Outbound RemoteAddress = Any**
   - ?????? IP???? Client ?? IP ??
   - ?? `Any` ??????? Client

3. **?? Profiles ????**
   - Domain: ????
   - Private: ??/?????  
   - Public: ????
   - ????? Profile ?????????????

4. **Admin ????**
   - ????????? Admin
   - ?? PowerShell ????? exit code 1

---

## ? ???????

? **Client ?????**
? **Server ?????? Client**  
? **?????????**
? **?????????**
? **???????**

---

## ?? ????

1. **Windows Firewall ????** - Inbound vs Outbound
2. **PowerShell ?????** - `New-NetFirewallRule`
3. **TCP ????** - ?????
4. **Admin ????** - ????????? Admin

---

## ?? ????

### ??????
```bash
# 1. ?????
.\DebugFirewallRules.ps1

# 2. ???????
.\QuickStart.bat

# 3. ??? Windows Defender ??? GUI
# ? Win ? ? ?? "???" ? ????
```

### ???????
```
? Get-NetFirewallRule ?????????
? Outbound ??? RemoteAddress = Any
? Server ????? "? Firewall port 9000 successfully opened"
? Client ??? Server ?????
```

---

## ?? ???

**???????????Client ?????? Server ????**

?? `QuickStart.bat` ???????

